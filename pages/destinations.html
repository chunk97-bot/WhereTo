<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popular Travel Destinations - WhereTo | Explore Amazing Places</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Discover popular travel destinations around the world. Get detailed guides, travel tips, visa information, and best time to visit for each destination.">
    <meta name="keywords" content="travel destinations, popular places to visit, travel guides, vacation spots, tourist attractions, where to travel">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://whereto.travel/destinations.html">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://whereto.travel/destinations.html">
    <meta property="og:title" content="Popular Travel Destinations - WhereTo">
    <meta property="og:description" content="Discover amazing travel destinations with detailed guides and tips.">
    <meta property="og:image" content="https://whereto.travel/og-destinations.png">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Popular Travel Destinations - WhereTo">
    <meta name="twitter:description" content="Discover amazing travel destinations with detailed guides and tips.">
    
    <link rel="icon" type="image/png" href="favicon.png">
    <meta name="theme-color" content="#0f0f23">
    
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/pages.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&family=Righteous&display=swap" rel="stylesheet">
</head>
<body>
    <div class="page-container">
        <!-- Navigation -->
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="home.html">
                    <svg viewBox="0 0 200 50" class="nav-logo-svg">
                        <text x="5" y="35" class="nav-brand-text">WhereTo</text>
                        <!-- Animated pin -->
                        <circle cx="175" cy="28" r="6" fill="#ff6b6b" class="nav-pin-dot"/>
                        <circle cx="175" cy="27" r="2.5" fill="white"/>
                        <!-- Flying plane -->
                        <g class="nav-flying-plane">
                            <path d="M0 0 L-6 -2 L-5 0 L-6 2 Z" fill="#ffffff"/>
                            <path d="M-3 -4 L-1.5 0 L-3 4 L-4 0 Z" fill="#ffffff" opacity="0.7"/>
                        </g>
                        <!-- Plane trail -->
                        <path class="nav-plane-trail" d="M100 38 Q130 25 150 30 Q170 35 180 22" 
                              fill="none" stroke="rgba(255,255,255,0.4)" stroke-width="1.5" 
                              stroke-dasharray="4 3" stroke-linecap="round"/>
                    </svg>
                </a>
            </div>
            <div class="nav-links">
                <a href="home.html" class="nav-link">ğŸ  Home</a>
                <a href="../nova.html" class="nav-link"><svg class="nav-robot-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="robotHead4" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#00f5ff"/><stop offset="50%" style="stop-color:#8b5cf6"/><stop offset="100%" style="stop-color:#ec4899"/></linearGradient><linearGradient id="robotGlow4" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#fff;stop-opacity:0.8"/><stop offset="100%" style="stop-color:#fff;stop-opacity:0"/></linearGradient><filter id="neonGlow4"><feGaussianBlur stdDeviation="0.5" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><rect x="4" y="7" width="16" height="13" rx="4" fill="url(#robotHead4)" filter="url(#neonGlow4)"/><rect x="5" y="8" width="14" height="4" rx="2" fill="url(#robotGlow4)" opacity="0.4"/><rect x="7" y="3" width="10" height="5" rx="2.5" fill="url(#robotHead4)"/><circle cx="8.5" cy="12.5" r="2.5" fill="#0a0a1a"/><circle cx="15.5" cy="12.5" r="2.5" fill="#0a0a1a"/><circle cx="8.5" cy="12.5" r="1.5" fill="#00f5ff"/><circle cx="15.5" cy="12.5" r="1.5" fill="#00f5ff"/><rect x="10" y="16" width="4" height="2" rx="1" fill="#ec4899"/><rect x="11" y="0" width="2" height="4" rx="1" fill="url(#robotHead4)"/><circle cx="12" cy="0" r="1.5" fill="#00f5ff"><animate attributeName="r" values="1.5;2;1.5" dur="1.5s" repeatCount="indefinite"/></circle><rect x="1" y="10" width="3" height="6" rx="1.5" fill="url(#robotHead4)"/><rect x="20" y="10" width="3" height="6" rx="1.5" fill="url(#robotHead4)"/></svg> NOVA</a>
                <a href="destinations.html" class="nav-link active">ğŸŒ Destinations</a>
                <a href="trip-planner.html" class="nav-link">ğŸ—“ï¸ Trip Planner</a>
                <a href="visa-guide.html" class="nav-link"><svg class="nav-visa-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 5L20 2V20L4 23Z" fill="#4a90c2"/><path d="M4 5L20 2L21 3L5 6Z" fill="#7fc4e8"/><path d="M20 2L21 3V21L20 20Z" fill="#2d5a87"/><circle cx="12" cy="11" r="4" stroke="#fff" stroke-width="1.2" fill="none"/><line x1="9" y1="14" x2="15" y2="8" stroke="#fff" stroke-width="1.2"/><rect x="7" y="17" width="8" height="1" fill="#fff" opacity="0.6"/></svg> Visa Guide</a>
                <a href="budget-calculator.html" class="nav-link">ğŸ’° Budget</a>
                <a href="currency-converter.html" class="nav-link">ğŸ’± Currency</a>
            </div>
            <button class="nav-toggle" id="navToggle">â˜°</button>
        </nav>

        <!-- Page Header -->
        <header class="page-header destinations-header">
            <!-- Animated Planes -->
            <div class="planes-container">
                <div class="flying-plane plane-1">âœˆï¸</div>
                <div class="flying-plane plane-2">âœˆï¸</div>
                <div class="flying-plane plane-3">âœˆï¸</div>
                <div class="flying-plane plane-4">âœˆï¸</div>
                
                <!-- Glowing particles -->
                <div class="glow-particle"></div>
                <div class="glow-particle"></div>
                <div class="glow-particle"></div>
                <div class="glow-particle"></div>
                <div class="glow-particle"></div>
                <div class="glow-particle"></div>
                <div class="glow-particle"></div>
                <div class="glow-particle"></div>
            </div>

            <div class="hero-content">
                <h1><span class="header-emoji">ğŸŒ</span> Discover Your Next Adventure</h1>
                <p>Explore amazing destinations around the world</p>
            </div>
            
            <!-- Search Bar -->
            <div class="hero-search">
                <input type="text" id="destinationSearch" placeholder="Where do you want to go?">
                <button class="search-btn" id="searchBtn">ğŸ” Search</button>
            </div>
        </header>

        <main class="destinations-main">
            <!-- Featured Destinations -->
            <section class="dest-section featured-section">
                <div class="section-header">
                    <h2><span class="section-emoji">ğŸ”¥</span> Featured Destinations</h2>
                    <a href="#" class="see-all" onclick="showAllDestinations()">See All â†’</a>
                </div>
                <div class="featured-carousel" id="featuredCarousel">
                    <!-- Loaded dynamically -->
                </div>
            </section>

            <!-- Explore by Region -->
            <section class="dest-section regions-section">
                <div class="section-header">
                    <h2><span class="section-emoji">ğŸŒ</span> Explore by Region</h2>
                </div>
                <div class="regions-grid" id="regionsGrid">
                    <!-- Region cards loaded dynamically -->
                </div>
            </section>

            <!-- Travel Ideas / Collections -->
            <section class="dest-section collections-section">
                <div class="section-header">
                    <h2><span class="section-emoji">âœ¨</span> Travel Ideas</h2>
                </div>
                <div class="collections-grid" id="collectionsGrid">
                    <!-- Collection cards loaded dynamically -->
                </div>
            </section>

            <!-- Best Time to Travel (Monthly) -->
            <section class="dest-section monthly-section">
                <div class="section-header">
                    <h2><span class="section-emoji">ğŸ“…</span> Best Places by Month</h2>
                </div>
                <div class="months-carousel" id="monthsCarousel">
                    <!-- Month buttons loaded dynamically -->
                </div>
                <div class="monthly-destinations" id="monthlyDestinations" style="display: none;">
                    <!-- Destinations for selected month -->
                </div>
            </section>

            <!-- All Destinations Grid -->
            <section class="dest-section all-destinations-section">
                <div class="section-header">
                    <h2 id="gridTitle"><span class="section-emoji">ğŸ”¥</span> Top Destinations</h2>
                    <div class="sort-options">
                        <select id="sortSelect">
                            <option value="featured">Featured</option>
                            <option value="rating">Top Rated</option>
                            <option value="name">A-Z</option>
                        </select>
                    </div>
                </div>
                <div class="destinations-grid" id="destinationsGrid">
                    <!-- Destination cards loaded dynamically -->
                </div>
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">ğŸ“</div>
                    <h3>No destinations found</h3>
                    <p>Try a different search or filter</p>
                    <button class="reset-btn" onclick="resetFilters()">Reset Filters</button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="page-footer">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>WhereTo</h3>
                    <p>Your Next Journey Starts Here</p>
                </div>
                <div class="footer-links">
                    <a href="../nova.html">NOVA</a>
                    <a href="destinations.html">Destinations</a>
                    <a href="trip-planner.html">Trip Planner</a>
                    <a href="visa-guide.html">Visa Guide</a>
                    <a href="budget-calculator.html">Budget</a>
                    <a href="currency-converter.html">Currency</a>
                </div>
                <div class="footer-bottom">
                    <p>Made with â¤ï¸ for travelers everywhere</p>
                    <p>Â© 2026 WhereTo. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="../data/regions-data.js"></script>
    <script>
        // State management
        let currentFilter = 'all';
        let currentSort = 'featured';
        let searchQuery = '';
        let selectedMonth = null;
        let searchResults = null;

        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
        });

        function initializePage() {
            loadFeaturedDestinations();
            loadRegions();
            loadCollections();
            loadMonthsCarousel();
            loadAllDestinations();
        }

        function setupEventListeners() {
            // Mobile nav toggle
            document.getElementById('navToggle').addEventListener('click', function() {
                document.querySelector('.nav-links').classList.toggle('show');
            });

            // Search functionality
            const searchInput = document.getElementById('destinationSearch');
            const searchBtn = document.getElementById('searchBtn');
            
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
            searchInput.addEventListener('input', debounce(performSearch, 300));

            // Sort dropdown
            document.getElementById('sortSelect').addEventListener('change', function() {
                currentSort = this.value;
                loadAllDestinations();
            });
        }

        // ==========================================
        // LOAD SECTIONS
        // ==========================================

        function loadFeaturedDestinations() {
            const container = document.getElementById('featuredCarousel');
            // Use regions-data.js for featured cities
            const featured = getFeaturedCitiesFromRegions();
            
            container.innerHTML = featured.map(city => `
                <div class="featured-card" onclick="viewCity('${city.regionId}', '${city.countryId}', '${city.id}')">
                    <div class="featured-image" style="background-image: url('${city.image}')">
                        <div class="featured-overlay">
                            <span class="featured-badge">â­ Featured</span>
                        </div>
                    </div>
                    <div class="featured-content">
                        <h3>${city.name}</h3>
                        <p class="location">ğŸ“ ${city.countryName || city.country}</p>
                        <div class="featured-meta">
                            <span class="duration">ğŸ• ${calculateDuration(city)}</span>
                            <span class="best-time">ğŸ“… ${formatBestTime(city.bestTime)}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadCollections() {
            const container = document.getElementById('collectionsGrid');
            const themes = [
                { id: 'beach', icon: 'ğŸ–ï¸', name: 'Beach Getaways', image: 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600', color: '#00b4d8' },
                { id: 'mountains', icon: 'ğŸ”ï¸', name: 'Hills & Mountains', image: 'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=600', color: '#2d6a4f' },
                { id: 'heritage', icon: 'ğŸ›ï¸', name: 'Heritage Sites', image: 'https://images.unsplash.com/photo-1548013146-72479768bada?w=600', color: '#9c6644' },
                { id: 'honeymoon', icon: 'ğŸ’•', name: 'Honeymoon Spots', image: 'https://images.unsplash.com/photo-1514282401047-d79a71a590e8?w=600', color: '#e63946' },
                { id: 'adventure', icon: 'ğŸ¯', name: 'Adventure', image: 'https://images.unsplash.com/photo-1551632811-561732d1e306?w=600', color: '#f77f00' },
                { id: 'relaxation', icon: 'ğŸ§˜', name: 'Relaxation', image: 'https://images.unsplash.com/photo-1544161515-4ab6ce6db874?w=600', color: '#8338ec' },
                { id: 'food', icon: 'ğŸœ', name: 'Foodie Dreams', image: 'https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=600', color: '#fb8500' },
                { id: 'pilgrimage', icon: 'ğŸ™', name: 'Pilgrimage', image: 'https://images.unsplash.com/photo-1561361513-2d000a50f0dc?w=600', color: '#d4a373' }
            ];

            // Use regions-data.js for category counts
            container.innerHTML = themes.map(theme => {
                const count = getCitiesByCategory(theme.id).length;
                return `
                <div class="collection-card" onclick="filterByCollection('${theme.id}')" style="--theme-color: ${theme.color}">
                    <div class="collection-image" style="background-image: url('${theme.image}')">
                        <div class="collection-overlay"></div>
                    </div>
                    <div class="collection-content">
                        <span class="collection-icon">${theme.icon}</span>
                        <h3>${theme.name}</h3>
                        <span class="collection-count">${count} places</span>
                    </div>
                </div>
            `}).join('');
        }

        function loadMonthsCarousel() {
            const container = document.getElementById('monthsCarousel');
            const months = [
                { id: 'january', name: 'January', icon: 'â„ï¸' },
                { id: 'february', name: 'February', icon: 'ğŸ’•' },
                { id: 'march', name: 'March', icon: 'ğŸŒ¸' },
                { id: 'april', name: 'April', icon: 'ğŸŒ·' },
                { id: 'may', name: 'May', icon: 'â˜€ï¸' },
                { id: 'june', name: 'June', icon: 'ğŸŒ§ï¸' },
                { id: 'july', name: 'July', icon: 'ğŸŒˆ' },
                { id: 'august', name: 'August', icon: 'ğŸŒ¿' },
                { id: 'september', name: 'September', icon: 'ğŸ‚' },
                { id: 'october', name: 'October', icon: 'ğŸƒ' },
                { id: 'november', name: 'November', icon: 'ğŸ' },
                { id: 'december', name: 'December', icon: 'ğŸ„' }
            ];

            const currentMonth = new Date().toLocaleString('en', { month: 'long' }).toLowerCase();

            container.innerHTML = months.map(month => `
                <button class="month-btn ${month.id === currentMonth ? 'current' : ''}" 
                        data-month="${month.id}" 
                        onclick="selectMonth('${month.id}')">
                    <span class="month-icon">${month.icon}</span>
                    <span class="month-name">${month.name}</span>
                </button>
            `).join('');
        }

        function loadAllDestinations() {
            const container = document.getElementById('destinationsGrid');
            const emptyState = document.getElementById('emptyState');
            
            // Use regions-data.js for destinations
            let cities = getAllCitiesFromRegions();
            
            // Check if any filter or search is active
            const hasActiveFilter = (currentFilter && currentFilter !== 'all') || searchQuery;

            // Apply category filter using regions-data
            if (currentFilter && currentFilter !== 'all') {
                cities = getCitiesByCategory(currentFilter);
            }

            // Apply search using comprehensive search
            if (searchQuery) {
                const results = searchRegionsData(searchQuery);
                // Combine cities and create cards for all types
                container.innerHTML = '';
                emptyState.style.display = 'none';
                
                let hasResults = false;
                let html = '';
                
                // Show countries
                if (results.countries.length > 0) {
                    hasResults = true;
                    html += `<div class="search-section" style="grid-column: 1/-1;"><h4 style="color: #00d4ff; margin-bottom: 1rem;">ğŸŒ Countries</h4></div>`;
                    html += results.countries.map(c => createCountryCard(c)).join('');
                }
                
                // Show cities
                if (results.cities.length > 0) {
                    hasResults = true;
                    html += `<div class="search-section" style="grid-column: 1/-1;"><h4 style="color: #00d4ff; margin: 1rem 0;">ğŸ™ï¸ Cities</h4></div>`;
                    html += results.cities.map(c => createCityCard(c)).join('');
                }
                
                // Show activities
                if (results.activities.length > 0) {
                    hasResults = true;
                    html += `<div class="search-section" style="grid-column: 1/-1;"><h4 style="color: #00d4ff; margin: 1rem 0;">ğŸ¯ Activities</h4></div>`;
                    html += results.activities.map(a => createActivityCard(a)).join('');
                }
                
                if (hasResults) {
                    container.innerHTML = html;
                } else {
                    container.innerHTML = '';
                    emptyState.style.display = 'block';
                }
                return;
            }

            // Apply sorting
            switch (currentSort) {
                case 'rating':
                    cities.sort((a, b) => (b.rating || 4.5) - (a.rating || 4.5));
                    break;
                case 'name':
                    cities.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'featured':
                default:
                    // Use featured cities first
                    const featuredNames = ['Paris', 'London', 'Tokyo', 'Bangkok', 'Singapore', 'Dubai', 'Barcelona', 'Rome', 'Amsterdam', 'Sydney'];
                    cities.sort((a, b) => {
                        const aIdx = featuredNames.indexOf(a.name);
                        const bIdx = featuredNames.indexOf(b.name);
                        if (aIdx === -1 && bIdx === -1) return 0;
                        if (aIdx === -1) return 1;
                        if (bIdx === -1) return -1;
                        return aIdx - bIdx;
                    });
            }

            // Limit to 10 if no filter/search is active
            if (!hasActiveFilter) {
                cities = cities.slice(0, 10);
            }

            if (cities.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
            } else {
                emptyState.style.display = 'none';
                container.innerHTML = cities.map(city => createCityCard(city)).join('');
            }
        }

        function loadRegions() {
            const container = document.getElementById('regionsGrid');
            const regions = getAllRegions();
            
            container.innerHTML = regions.map(region => `
                <a href="region.html?id=${region.id}" class="region-card">
                    <div class="region-image" style="background-image: url('${region.image}')"></div>
                    <div class="region-overlay"></div>
                    <div class="region-content">
                        <span class="region-icon">${region.emoji}</span>
                        <h3>${region.name}</h3>
                        <span class="region-country-count">${region.countryCount} countries</span>
                    </div>
                </a>
            `).join('');
        }

        // ==========================================
        // CREATE CARDS - Using regions-data structure
        // ==========================================

        function createCityCard(city) {
            const duration = calculateDuration(city);
            const bestTime = formatBestTime(city.bestTime);
            return `
                <div class="destination-card" data-id="${city.id}">
                    <div class="card-image" style="background-image: url('${city.image}')" onclick="viewCity('${city.regionId}', '${city.countryId}', '${city.id}')">
                        <span class="featured-badge">â­ Featured</span>
                    </div>
                    <div class="card-content" onclick="viewCity('${city.regionId}', '${city.countryId}', '${city.id}')">
                        <h3>${city.name}</h3>
                        <p class="location">ğŸ“ ${city.countryName || city.country}</p>
                        <p class="description">${(city.description || '').substring(0, 80)}...</p>
                        <div class="card-footer">
                            <span class="duration">ğŸ• ${duration}</span>
                            <span class="best-time">ğŸ“… ${bestTime}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function createCountryCard(country) {
            return `
                <div class="destination-card" data-id="${country.id}">
                    <div class="card-image" style="background-image: url('${country.image}')" onclick="viewCountry('${country.regionId}', '${country.id}')">
                        <span class="featured-badge">${country.flag} Country</span>
                    </div>
                    <div class="card-content" onclick="viewCountry('${country.regionId}', '${country.id}')">
                        <h3>${country.name}</h3>
                        <p class="location">ğŸ“ ${country.regionName}</p>
                        <p class="description">${(country.description || '').substring(0, 80)}...</p>
                        <div class="card-footer">
                            <span class="duration">ğŸ™ï¸ ${country.cityCount || '?'} cities</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function createActivityCard(activity) {
            return `
                <div class="destination-card activity-card" data-id="${activity.name}">
                    <div class="card-content" onclick="viewCity('${activity.regionId}', '${activity.countryId}', '${activity.cityId}')">
                        <h3>ğŸ¯ ${activity.name}</h3>
                        <p class="location">ğŸ“ ${activity.cityName}, ${activity.countryName}</p>
                        <p class="description">${(activity.description || activity.type || '').substring(0, 80)}...</p>
                        <div class="card-footer">
                            <span class="duration">${activity.type || 'Activity'}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Helper functions
        function calculateDuration(city) {
            if (!city.attractions) return '3-4 days';
            const count = city.attractions.length;
            if (count <= 3) return '2-3 days';
            if (count <= 5) return '3-4 days';
            if (count <= 7) return '4-5 days';
            return '5-6 days';
        }
        
        function formatBestTime(bestTime) {
            if (!bestTime) return 'Year-round';
            return bestTime.split(',')[0].replace('to', '-').trim().substring(0, 8);
        }

        // ==========================================
        // FILTER & SEARCH FUNCTIONS
        // ==========================================

        function performSearch() {
            searchQuery = document.getElementById('destinationSearch').value;
            loadAllDestinations();
            
            if (searchQuery) {
                document.getElementById('gridTitle').innerHTML = `<span class="section-emoji">ğŸ”</span> Search Results for "${searchQuery}"`;
                scrollToSection('.all-destinations-section');
            }
        }

        function filterByCollection(collectionId) {
            currentFilter = collectionId;
            searchQuery = ''; // Clear search when filtering
            const categoryNames = {
                'beach': 'Beach Getaways', 'mountains': 'Hills & Mountains', 'heritage': 'Heritage Sites',
                'honeymoon': 'Honeymoon Spots', 'adventure': 'Adventure', 'relaxation': 'Relaxation',
                'food': 'Foodie Dreams', 'pilgrimage': 'Pilgrimage'
            };
            const categoryIcons = {
                'beach': 'ğŸ–ï¸', 'mountains': 'ğŸ”ï¸', 'heritage': 'ğŸ›ï¸', 'honeymoon': 'ğŸ’•',
                'adventure': 'ğŸ¯', 'relaxation': 'ğŸ§˜', 'food': 'ğŸœ', 'pilgrimage': 'ğŸ™'
            };
            loadAllDestinations();
            document.getElementById('gridTitle').innerHTML = 
                `<span class="section-emoji">${categoryIcons[collectionId] || 'ğŸŒ'}</span> ${categoryNames[collectionId] || 'Destinations'}`;
            scrollToSection('.all-destinations-section');
        }

        function selectMonth(monthId) {
            document.querySelectorAll('.month-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-month="${monthId}"]`).classList.add('active');
            
            // Use regions-data.js for monthly destinations
            const cities = getCitiesByMonth(monthId);
            const monthNames = {
                january: 'January', february: 'February', march: 'March', april: 'April',
                may: 'May', june: 'June', july: 'July', august: 'August',
                september: 'September', october: 'October', november: 'November', december: 'December'
            };
            
            const container = document.getElementById('destinationsGrid');
            const emptyState = document.getElementById('emptyState');
            document.getElementById('gridTitle').innerHTML = `<span class="section-emoji">ğŸ“…</span> Best for ${monthNames[monthId]}`;
            
            if (cities.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
            } else {
                emptyState.style.display = 'none';
                container.innerHTML = cities.slice(0, 12).map(c => createCityCard(c)).join('');
            }
            
            scrollToSection('.all-destinations-section');
        }

        function resetFilters() {
            currentFilter = 'all';
            searchQuery = '';
            document.getElementById('destinationSearch').value = '';
            document.querySelectorAll('.month-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('gridTitle').innerHTML = '<span class="section-emoji">ğŸ”¥</span> Top Destinations';
            loadAllDestinations();
        }

        function showAllDestinations() {
            resetFilters();
            scrollToSection('.all-destinations-section');
        }

        // ==========================================
        // NAVIGATION - Use region structure
        // ==========================================

        function viewCity(regionId, countryId, cityId) {
            window.location.href = `city.html?id=${cityId}&country=${countryId}&region=${regionId}`;
        }

        function viewCountry(regionId, countryId) {
            window.location.href = `country.html?id=${countryId}&region=${regionId}`;
        }

        function viewDestination(id) {
            // Legacy support - find in regions data
            const allCities = getAllCitiesFromRegions();
            const city = allCities.find(c => c.id === id || c.name === id);
            if (city) {
                viewCity(city.regionId, city.countryId, city.id);
            }
        }

        function scrollToSection(selector) {
            const section = document.querySelector(selector);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // ==========================================
        // UTILITIES
        // ==========================================

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>
